(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d6499dd"],{"2e61":function(e,t,a){"use strict";var i=a("0711"),n={name:"SudokuInputArea",data:function(){return{sudokuNumber:Object(i.d)()}}},a=(a("e076"),a("2877")),n=Object(a.a)(n,function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"ui popup transition hidden sudoku-number-area"},[a._l(a.sudokuNumber,function(e,t){return i("div",{key:t,staticClass:"sudoku-row"},a._l(e,function(t,e){return i("div",{key:e,staticClass:"number",on:{click:function(e){return a.$emit("selectNumber",t)}}},[i("input",{staticClass:"sudoku-number-input hover-sudoku-number m-opacity-big background-color-blue",attrs:{disabled:"",type:"text"},domProps:{value:t}})])}),0)}),i("div",{staticClass:"sudoku-row"},[i("button",{staticClass:"ui icon button basic fluid blue",on:{click:function(e){return a.$emit("selectNumber",null)}}},[i("i",{staticClass:"exchange alternate icon"})])])],2)},[],!1,null,"e67dccc4",null);t.a=n.exports},"5bb9":function(e,t,a){"use strict";a.d(t,"a",function(){return r});var i=a("d4ec"),t=a("bee2"),n=a("ade3"),r=(Object(t.a)(o,[{key:"row",get:function(){return this._row}},{key:"column",get:function(){return this._column}}],[{key:"isInit",value:function(e){return-1===e.row||-1===e.column}},{key:"isNotInit",value:function(e){return!o.isInit(e)}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;Object(i.a)(this,o),Object(n.a)(this,"_row",void 0),Object(n.a)(this,"_column",void 0),this._row=e,this._column=t}},"8cad":function(e,t,a){},"9a15":function(e,t,a){"use strict";var i=a("8cad");a.n(i).a},b189:function(e,o,c){"use strict";(function(a){c("99af");var i=c("5bb9"),e=c("8c5d"),n=c("c65d"),r=c("e8c9"),t=c("2e61");o.a={name:"SudokuArea",components:{SudokuInputArea:t.a},props:{sudokuData:{type:Array,required:!0},holesData:{type:Array,required:!0},illegalMatrix:{type:Array,default:Object(e.d)()}},data:function(){return{clickPosition:new i.a,style:{topicBackgroundColor:"background-color-gray",errorBorderColor:"border-color-red"}}},methods:{hideSudokuNumber:function(){var e,t;i.a.isNotInit(this.clickPosition)&&(e=(t=this.clickPosition).row,t=t.column,a("#numberInput".concat(e).concat(t)).popup("hide"))},selectSudokuNumber:function(e){var t=this.clickPosition,a=t.row,t=t.column;null===e?Object(r.a)(this.holesData,new n.a(a,t,!this.holesData[a][t])):Object(r.a)(this.sudokuData,new n.a(a,t,e)),this.hideSudokuNumber()},showSudokuNumber:function(e,t){this.hideSudokuNumber(),this.showSudokuInputArea(e,t),this.clickPosition=new i.a(e,t)},showSudokuInputArea:function(e,t){t=a("#".concat(this.inputId(e,t)));t.popup({popup:a("#sudokuInputArea"),position:"bottom center",on:"click"}),t.popup("toggle")},inputId:function(e,t){return"numberInput".concat(e).concat(t)}}}}).call(this,c("1157"))},c2e4:function(e,t,a){},ceed:function(e,t,n){"use strict";(function(e){n("96cf");var a=n("1da1"),i=n("6b2e");t.a={name:"SudokuSetting",data:function(){return{sudokuLevelList:[],realTimeVerification:!1}},mounted:function(){this.initSudokuLevels(),this.initDropdown()},methods:{initSudokuLevels:function(){var t=this;return Object(a.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getSudokuLevelList();case 2:t.sudokuLevelList=e.sent;case 3:case"end":return e.stop()}},e)}))()},initDropdown:function(){e(".ui.dropdown").dropdown()}}}}).call(this,n("1157"))},e076:function(e,t,a){"use strict";var i=a("c2e4");a.n(i).a},eff7:function(e,t,a){"use strict";a.r(t);var r=a("b85c"),o=(a("96cf"),a("1da1")),c=a("8c5d"),u=a("34c9"),i=a("b189").a,n=(a("9a15"),a("2877")),s=Object(n.a)(i,function(){var i=this,e=i.$createElement,n=i._self._c||e;return n("div",[i._l(i.sudokuData,function(e,a){return n("div",{key:a,staticClass:"sudoku-row absolute-center"},i._l(e,function(e,t){return n("div",{key:t,staticClass:"number",on:{click:function(e){return i.showSudokuNumber(a,t)}}},[n("input",{staticClass:"sudoku-number-input",class:[i.holesData[a][t]?"":i.style.topicBackgroundColor,1===i.illegalMatrix[a][t]?i.style.errorBorderColor:""],attrs:{id:i.inputId(a,t),type:"number",disabled:"true"},domProps:{value:e}})])}),0)}),n("SudokuInputArea",{attrs:{id:"sudokuInputArea"},on:{selectNumber:i.selectSudokuNumber}})],2)},[],!1,null,"4f27a19d",null).exports,l=a("ceed").a,d=Object(n.a)(l,function(){var r=this,e=r.$createElement,a=r._self._c||e;return a("div",{staticClass:"ui two column grid centered"},[a("div",{staticClass:"ui toggle checkbox column tip-popup",attrs:{"data-content":"实时校验数独矩阵的合法性"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:r.realTimeVerification,expression:"realTimeVerification"}],attrs:{id:"realTimeVerificationCheckbox",type:"checkbox"},domProps:{checked:Array.isArray(r.realTimeVerification)?-1<r._i(r.realTimeVerification,null):r.realTimeVerification},on:{change:function(e){var t,a=r.realTimeVerification,i=e.target,n=!!i.checked;Array.isArray(a)?(t=null,e=r._i(a,t),i.checked?e<0&&(r.realTimeVerification=a.concat([t])):-1<e&&(r.realTimeVerification=a.slice(0,e).concat(a.slice(e+1)))):r.realTimeVerification=n}}}),a("label",{attrs:{for:"realTimeVerificationCheckbox"}},[r._v("实时校验")])]),a("div",{staticClass:"column"},[a("div",{staticClass:"ui selection dropdown"},[a("i",{staticClass:"dropdown icon"}),a("div",{staticClass:"default text"},[r._v("根据难度随机生成")]),a("div",{staticClass:"scrollhint menu"},r._l(r.sudokuLevelList,function(t,e){return a("div",{key:e,staticClass:"item",on:{click:function(e){return r.$emit("clickSudokuLevel",t.level)}}},[r._v(" "+r._s(t.name)+" ")])}),0)])])])},[],!1,null,null,null).exports,m=(a("0d03"),a("39ec")),i=a("f0ac"),l=a("00fb"),f=a("464f"),m={name:"RaceInformation",components:{LeftLabeledField:a("88bc").a,BasicField:l.a,LeftLabeledInputField:i.a,Form:m.a},data:function(){return{form:{title:"",description:"",raceTimeRange:[new Date,new Date]}}},methods:{validaForm:function(){this.$refs.raceInformationForm.validaForm()},validateRule:function(){return{title:f.a.raceTitleRules,description:f.a.raceDescriptionRules}}}},m=Object(n.a)(m,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("Form",{ref:"raceInformationForm",attrs:{"form-id":"raceInformationForm","validate-rule":t.validateRule()}},[e("LeftLabeledInputField",{attrs:{data:t.form.title,label:"标题",name:"title"},on:{"update:data":function(e){return t.$set(t.form,"title",e)}}}),e("BasicField",[e("div",{staticClass:"ui left corner labeled input"},[e("div",{staticClass:"ui left corner label"},[e("i",{staticClass:"asterisk icon"})]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],attrs:{placeholder:"竞赛的描述",name:"description"},domProps:{value:t.form.description},on:{input:function(e){e.target.composing||t.$set(t.form,"description",e.target.value)}}})])]),e("LeftLabeledField",{attrs:{label:"竞赛时间"}},[e("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.form.raceTimeRange,callback:function(e){t.$set(t.form,"raceTimeRange",e)},expression:"form.raceTimeRange"}})],1)],1)},[],!1,null,null,null).exports,p=a("0711"),h=a("4337"),s={name:"SudokuRace",components:{RaceInformation:m,SudokuSetting:d,SudokuArea:s},data:function(){return{raceInformation:{matrix:Object(c.d)(),holes:Object(c.c)()},illegalMatrix:Object(c.d)()}},watch:{"raceInformation.matrix":function(){this.$refs.sudokuSetting.realTimeVerification&&this.checkSudokuMatrix()}},methods:{getSudokuFinal:function(i){var n=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(i);case 2:a=e.sent,t=a.success,a=a.data,t&&(n.raceInformation.matrix=a.matrix,n.raceInformation.holes=a.holes,n.clearIllegalMatrix());case 6:case"end":return e.stop()}},e)}))()},publishRace:function(){var i=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.checkSudokuMatrix()){e.next=3;break}return Object(c.f)({message:"数独矩阵不符合数独规则"}),e.abrupt("return");case 3:if(i.$refs.raceInformation.validaForm()){e.next=6;break}return Object(c.f)({message:"竞赛信息不符合要求"}),e.abrupt("return");case 6:return e.next=8,t=Object.assign(i.raceInformation,i.$refs.raceInformation.form),Object(h.b)("".concat("/gameRace","/publishPublicRace"),t);case 8:a=e.sent,a.success&&Object(c.g)({message:"发布竞赛成功"});case 11:case"end":return e.stop()}var t},e)}))()},checkSudokuMatrix:function(){var e=Object(p.c)(this.raceInformation.matrix);if(0===e.length)return this.clearIllegalMatrix(),!0;var t=Object(c.d)(),a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,n=i.row,i=i.column;t[n][i]=1}}catch(e){a.e(e)}finally{a.f()}return this.illegalMatrix=t,!1},clearIllegalMatrix:function(){this.illegalMatrix=Object(c.d)()}}},s=Object(n.a)(s,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",[e("div",{staticClass:"ui top attached segment"},[t._m(0),e("div",{staticClass:"ui center aligned segment"},[e("SudokuArea",{staticClass:"m-padded-tb-large",attrs:{"holes-data":t.raceInformation.holes,"sudoku-data":t.raceInformation.matrix,"illegal-matrix":t.illegalMatrix},on:{"update:holesData":function(e){return t.$set(t.raceInformation,"holes",e)},"update:holes-data":function(e){return t.$set(t.raceInformation,"holes",e)},"update:sudokuData":function(e){return t.$set(t.raceInformation,"matrix",e)},"update:sudoku-data":function(e){return t.$set(t.raceInformation,"matrix",e)}}}),e("div",{staticClass:"absolute-center"},[e("SudokuSetting",{ref:"sudokuSetting",on:{clickSudokuLevel:t.getSudokuFinal}})],1)],1),t._m(1),e("RaceInformation",{ref:"raceInformation"})],1),e("button",{staticClass:"ui bottom attached button primary fluid",on:{click:t.publishRace}},[t._v("提交")])])},[function(){var e=this.$createElement,e=this._self._c||e;return e("h4",{staticClass:"ui horizontal divider header"},[e("i",{staticClass:"edit outline icon"}),this._v("数独题目")])},function(){var e=this.$createElement,e=this._self._c||e;return e("h4",{staticClass:"ui horizontal divider header m-padded-t"},[e("i",{staticClass:"info circle icon"}),this._v("竞赛信息")])}],!1,null,null,null);t.default=s.exports}}]);